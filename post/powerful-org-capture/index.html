<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>强大的org-capture | Chuck</title><meta name=keywords content="emacs,org-mode"><meta name=description content="Capture是Org mode中一个非常重要的功能，它可以：

capture 可以预先设置记录内容的模板和存储入口；
capture 提供统一的输入入口；
capture 用完即走，不干扰当前工作流；

Capture模板
默认Capture模板样式如下：
'(&#34;t&#34; &#34;Task&#34; entry (file+headline &#34;&#34; &#34;Tasks&#34;) &#34;* TODO %?\n  %u\n  %a&#34;)
"><meta name=author content="Chuck"><link rel=canonical href=https://xuchengpeng.github.io/post/powerful-org-capture/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xuchengpeng.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://xuchengpeng.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://xuchengpeng.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://xuchengpeng.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://xuchengpeng.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="强大的org-capture"><meta property="og:description" content="Capture是Org mode中一个非常重要的功能，它可以：

capture 可以预先设置记录内容的模板和存储入口；
capture 提供统一的输入入口；
capture 用完即走，不干扰当前工作流；

Capture模板
默认Capture模板样式如下：
'(&#34;t&#34; &#34;Task&#34; entry (file+headline &#34;&#34; &#34;Tasks&#34;) &#34;* TODO %?\n  %u\n  %a&#34;)
"><meta property="og:type" content="article"><meta property="og:url" content="https://xuchengpeng.github.io/post/powerful-org-capture/"><meta property="og:image" content="https://xuchengpeng.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-07-20T15:00:59+08:00"><meta property="article:modified_time" content="2018-07-20T15:00:59+08:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xuchengpeng.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="强大的org-capture"><meta name=twitter:description content="Capture是Org mode中一个非常重要的功能，它可以：

capture 可以预先设置记录内容的模板和存储入口；
capture 提供统一的输入入口；
capture 用完即走，不干扰当前工作流；

Capture模板
默认Capture模板样式如下：
'(&#34;t&#34; &#34;Task&#34; entry (file+headline &#34;&#34; &#34;Tasks&#34;) &#34;* TODO %?\n  %u\n  %a&#34;)
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xuchengpeng.github.io/post/"},{"@type":"ListItem","position":2,"name":"强大的org-capture","item":"https://xuchengpeng.github.io/post/powerful-org-capture/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"强大的org-capture","name":"强大的org-capture","description":"Capture是Org mode中一个非常重要的功能，它可以：\ncapture 可以预先设置记录内容的模板和存储入口； capture 提供统一的输入入口； capture 用完即走，不干扰当前工作流； Capture模板 默认Capture模板样式如下：\n\u0026#39;(\u0026#34;t\u0026#34; \u0026#34;Task\u0026#34; entry (file+headline \u0026#34;\u0026#34; \u0026#34;Tasks\u0026#34;) \u0026#34;* TODO %?\\n %u\\n %a\u0026#34;) ","keywords":["emacs","org-mode"],"articleBody":"Capture是Org mode中一个非常重要的功能，它可以：\ncapture 可以预先设置记录内容的模板和存储入口； capture 提供统一的输入入口； capture 用完即走，不干扰当前工作流； Capture模板 默认Capture模板样式如下：\n'(\"t\" \"Task\" entry (file+headline \"\" \"Tasks\") \"* TODO %?\\n %u\\n %a\") 这个模板包含五个部分，分别是：\n模板组成 对应默认模板中的内容 描述 key “t” 用来选择模板的字符 description “Task” 展示用的模板的描述 type entry 新增内容的类型 target (file+headline \"\" “Tasks”) 新增内容的存储位置 template “* TODO %?\\n %u\\n %a” 新增内容的模板 新增内容的类型type type description entry 带有 headline 的一个 Org mode 节点，如\"* headline\" item 一个列表项，如\"- item\" checkitem 一个 checkbox 列表项，如\"[ ] item\" table-line 一个表格行 plain 普通文本 新增内容的存储位置target type description example file 文件 (file “path/to/file”) id 特定 ID 的某个 headline (id “id of existing Org entry”) file+headline 文件的某个唯一的 headline (file+headline “path/to/file” “node headline”) file+olp 文件中的 headline 路径 (file+olp “path/to/file” “Level 1 heading” “Level 2” …) file+regexp 文件中被正则匹配的 headline (file+regexp “path/to/file” “regexp to find location”) file+datetree 文件中当日所在的 datetree (file+datetree “path/to/file”) file+datetree+prompt 文件中的 datetree，弹出日期选择 (file+datetree+prompt “path/to/file”) file+weektree 文件中当日所在的 weektree (file+weektree “path/to/file”) file+weektree+prompt 文件中的 weektree，弹出日期选择 (file+weektree+prompt “path/to/file”) file+function 文件中被函数匹配的位置 (file+function “path/to/file” function-finding-location) clock 当前正在计时中的任务所在的位置 (clock) function 自定义函数匹配的位置 (function function-finding-location) 新增内容的模板template 时间和日期相关 标记 描述 %\u003c…\u003e 自定义格式的 timestamp，如: %\u003c%Y-%m-%d\u003e，会得到 \u003c2018-03-04 日\u003e %t 当前仅包含日期的 timestamp，如: \u003c2018-03-04 日\u003e %T 当前包含日期和时间的 timestamp，如: \u003c2018-03-04 日 19:26\u003e %u 当前包含日期的未激活的 timestamp，如: [2018-03-04 日] %U 当前包含日期和时间的未激活的 timestamp，如: [2018-03-04 日 19:26] %^t 类似 %t，但是弹出日历让用户选择日期 %^T 类似 %T，但是弹出日历让用户选择日期和时间 %^u 类似 %u，但是弹出日历让用户选择日期 %^U 类似 %U，但是弹出日历让用户选择日期和时间 剪切板相关 标记 描述 %c 当前 kill ring 中的第一条内容 %x 当前系统剪贴板中的内容 %^C 交互式地选择 kill ring 或剪贴板中的内容 %^L 类似 %^C，但是将选中的内容作为链接插入 标签相关 标记 描述 %^g 交互式地输入标签，并用 target 所在文件中的标签进行补全 %^G 类似 %^g，但用所有 org-agenda-files 涉及文件中的标签进行补全 文件相关 标记 描述 %[file] 插入文件 /file/ 中的内容 %f 执行 org-capture 时当前 buffer 对应的文件名 %F 类似 %f，但输入该文件的绝对路径 任务相关 标记 描述 %k 当前在计时的任务的标题 %K 当前在计时的任务的链接 外部链接的信息 link type description bbdb BBDB 联系人数据库记录链接 irc IRC 会话链接 vm View Mail 邮件阅读器中的消息、目录链接 wl Wunder Lust 邮件/新闻阅读器中的消息、目录链接 mh MH-E 邮件用户代理中的消息、目录链接 mew MEW 邮件阅读器中的消息链接 rmail Emacs 的默认邮件阅读器 Rmail 中的消息链接 gnus GNUS 邮件/新闻阅读器中的群组、消息等资源链接 eww/w3/w3m 在 eww/w3/w3m 中存储的网页链接 calendar 日历链接 org-protocol 遵循 org-protocol 协议的外部应用链接 eww 可用的特殊标记有如下三个：\n标记 描述 %:type 固定值，eww %:link 页面的链接 %:description 页面的标题，如无则为页面的链接 org-protocol 可用的特殊标记有如下六个：\n标记 描述 %:type 链接的类型，如 http/https/ftp 等 %:link 链接地址，在 org-protocol 里的 url 字段 %:description 链接的标题，在 org-protocol 里的 title 字段 %:annotation 靠 url 和 title 完成的 org 格式的链接 %:initial 链接上选中的文本，在 org-protocol 里的 body 字段 %:query org-protocol 上除掉开头和子协议部分的剩下部分 Capture模板示例 用 org-capture 做任务管理 (add-to-list 'org-capture-templates '(\"t\" \"Tasks\")) (add-to-list 'org-capture-templates '(\"tt\" \"Task\" entry (file+headline \"task.org\" \"Task\") \"* TODO %^{任务名}\\n%u\\n%a\\n\" :clock-in t :clock-resume t)) (add-to-list 'org-capture-templates '(\"tw\" \"Work Task\" entry (file+headline \"work.org\" \"Work\") \"* TODO %^{任务名}\\n%u\\n%a\\n\" :clock-in t :clock-resume t)) 这里需要新建普通任务和工作任务，因此可以创建一个任务分组。\n用 org-capture 新建博客文章 (with-eval-after-load 'org-capture (defun dotemacs-org-hugo-new-subtree-post-capture-template () \"Returns `org-capture' template string for new Hugo post. See `org-capture-templates' for more information.\" (let* ((title (read-from-minibuffer \"Post Title: \")) ;Prompt to enter the post title (fname (org-hugo-slug title)) (date (format-time-string (org-time-stamp-format :long :inactive) (org-current-time)))) (mapconcat #'identity `( ,(concat \"* TODO \" title) \":PROPERTIES:\" ,(concat \":EXPORT_FILE_NAME: \" fname) ,(concat \":EXPORT_DATE: \" date) \":EXPORT_HUGO_CUSTOM_FRONT_MATTER: :comments true :mathjax false\" \":END:\" \"%?\\n\") ;Place the cursor here finally \"\\n\"))) (add-to-list 'org-capture-templates '(\"h\" ;`org-capture' binding + h \"Hugo post\" entry ;; It is assumed that below file is present in `org-directory' ;; and that it has a \"Hugo Posts\" heading. It can even be a ;; symlink pointing to the actual location of all-posts.org! (file+olp \"hugo-posts.org\" \"Hugo Posts\") (function dotemacs-org-hugo-new-subtree-post-capture-template))) ","wordCount":"497","inLanguage":"en","datePublished":"2018-07-20T15:00:59+08:00","dateModified":"2018-07-20T15:00:59+08:00","author":{"@type":"Person","name":"Chuck"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuchengpeng.github.io/post/powerful-org-capture/"},"publisher":{"@type":"Organization","name":"Chuck","logo":{"@type":"ImageObject","url":"https://xuchengpeng.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuchengpeng.github.io/ accesskey=h title="Chuck (Alt + H)"><img src=https://xuchengpeng.github.io/apple-touch-icon.png alt aria-label=logo height=35>Chuck</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuchengpeng.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://xuchengpeng.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://xuchengpeng.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://xuchengpeng.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://xuchengpeng.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuchengpeng.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://xuchengpeng.github.io/post/>Posts</a></div><h1 class=post-title>强大的org-capture</h1><div class=post-meta><span title='2018-07-20 15:00:59 +0800 +0800'>July 20, 2018</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;497 words&nbsp;·&nbsp;Chuck&nbsp;|&nbsp;<a href=https://github.com/xuchengpeng/hugo-blog/tree/master/content/post/powerful-org-capture.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#capture模板>Capture模板</a><ul><li><a href=#新增内容的类型type>新增内容的类型type</a></li><li><a href=#新增内容的存储位置target>新增内容的存储位置target</a></li><li><a href=#新增内容的模板template>新增内容的模板template</a></li></ul></li><li><a href=#capture模板示例>Capture模板示例</a><ul><li><a href=#用-org-capture-做任务管理>用 org-capture 做任务管理</a></li><li><a href=#用-org-capture-新建博客文章>用 org-capture 新建博客文章</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Capture是Org mode中一个非常重要的功能，它可以：</p><ol><li>capture 可以预先设置记录内容的模板和存储入口；</li><li>capture 提供统一的输入入口；</li><li>capture 用完即走，不干扰当前工作流；</li></ol><h2 id=capture模板>Capture模板<a hidden class=anchor aria-hidden=true href=#capture模板>#</a></h2><p>默认Capture模板样式如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-el data-lang=el><span class=line><span class=cl><span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;t&#34;</span> <span class=s>&#34;Task&#34;</span> <span class=nv>entry</span> <span class=p>(</span><span class=nv>file+headline</span> <span class=s>&#34;&#34;</span> <span class=s>&#34;Tasks&#34;</span><span class=p>)</span> <span class=s>&#34;* TODO %?\n  %u\n  %a&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>这个模板包含五个部分，分别是：</p><table><thead><tr><th style=text-align:left>模板组成</th><th style=text-align:left>对应默认模板中的内容</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>key</td><td style=text-align:left>&ldquo;t&rdquo;</td><td style=text-align:left>用来选择模板的字符</td></tr><tr><td style=text-align:left>description</td><td style=text-align:left>&ldquo;Task&rdquo;</td><td style=text-align:left>展示用的模板的描述</td></tr><tr><td style=text-align:left>type</td><td style=text-align:left>entry</td><td style=text-align:left>新增内容的类型</td></tr><tr><td style=text-align:left>target</td><td style=text-align:left>(file+headline "" &ldquo;Tasks&rdquo;)</td><td style=text-align:left>新增内容的存储位置</td></tr><tr><td style=text-align:left>template</td><td style=text-align:left>&ldquo;* TODO %?\n %u\n %a&rdquo;</td><td style=text-align:left>新增内容的模板</td></tr></tbody></table><h3 id=新增内容的类型type>新增内容的类型type<a hidden class=anchor aria-hidden=true href=#新增内容的类型type>#</a></h3><table><thead><tr><th style=text-align:left>type</th><th style=text-align:left>description</th></tr></thead><tbody><tr><td style=text-align:left>entry</td><td style=text-align:left>带有 headline 的一个 Org mode 节点，如"* headline"</td></tr><tr><td style=text-align:left>item</td><td style=text-align:left>一个列表项，如"- item"</td></tr><tr><td style=text-align:left>checkitem</td><td style=text-align:left>一个 checkbox 列表项，如"[ ] item"</td></tr><tr><td style=text-align:left>table-line</td><td style=text-align:left>一个表格行</td></tr><tr><td style=text-align:left>plain</td><td style=text-align:left>普通文本</td></tr></tbody></table><h3 id=新增内容的存储位置target>新增内容的存储位置target<a hidden class=anchor aria-hidden=true href=#新增内容的存储位置target>#</a></h3><table><thead><tr><th style=text-align:left>type</th><th style=text-align:left>description</th><th style=text-align:left>example</th></tr></thead><tbody><tr><td style=text-align:left>file</td><td style=text-align:left>文件</td><td style=text-align:left>(file &ldquo;path/to/file&rdquo;)</td></tr><tr><td style=text-align:left>id</td><td style=text-align:left>特定 ID 的某个 headline</td><td style=text-align:left>(id &ldquo;id of existing Org entry&rdquo;)</td></tr><tr><td style=text-align:left>file+headline</td><td style=text-align:left>文件的某个唯一的 headline</td><td style=text-align:left>(file+headline &ldquo;path/to/file&rdquo; &ldquo;node headline&rdquo;)</td></tr><tr><td style=text-align:left>file+olp</td><td style=text-align:left>文件中的 headline 路径</td><td style=text-align:left>(file+olp &ldquo;path/to/file&rdquo; &ldquo;Level 1 heading&rdquo; &ldquo;Level 2&rdquo; &mldr;)</td></tr><tr><td style=text-align:left>file+regexp</td><td style=text-align:left>文件中被正则匹配的 headline</td><td style=text-align:left>(file+regexp &ldquo;path/to/file&rdquo; &ldquo;regexp to find location&rdquo;)</td></tr><tr><td style=text-align:left>file+datetree</td><td style=text-align:left>文件中当日所在的 datetree</td><td style=text-align:left>(file+datetree &ldquo;path/to/file&rdquo;)</td></tr><tr><td style=text-align:left>file+datetree+prompt</td><td style=text-align:left>文件中的 datetree，弹出日期选择</td><td style=text-align:left>(file+datetree+prompt &ldquo;path/to/file&rdquo;)</td></tr><tr><td style=text-align:left>file+weektree</td><td style=text-align:left>文件中当日所在的 weektree</td><td style=text-align:left>(file+weektree &ldquo;path/to/file&rdquo;)</td></tr><tr><td style=text-align:left>file+weektree+prompt</td><td style=text-align:left>文件中的 weektree，弹出日期选择</td><td style=text-align:left>(file+weektree+prompt &ldquo;path/to/file&rdquo;)</td></tr><tr><td style=text-align:left>file+function</td><td style=text-align:left>文件中被函数匹配的位置</td><td style=text-align:left>(file+function &ldquo;path/to/file&rdquo; function-finding-location)</td></tr><tr><td style=text-align:left>clock</td><td style=text-align:left>当前正在计时中的任务所在的位置</td><td style=text-align:left>(clock)</td></tr><tr><td style=text-align:left>function</td><td style=text-align:left>自定义函数匹配的位置</td><td style=text-align:left>(function function-finding-location)</td></tr></tbody></table><h3 id=新增内容的模板template>新增内容的模板template<a hidden class=anchor aria-hidden=true href=#新增内容的模板template>#</a></h3><ul><li>时间和日期相关</li></ul><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%&lt;&mldr;></td><td style=text-align:left>自定义格式的 timestamp，如: %&lt;%Y-%m-%d>，会得到 &lt;2018-03-04 日></td></tr><tr><td style=text-align:left>%t</td><td style=text-align:left>当前仅包含日期的 timestamp，如: &lt;2018-03-04 日></td></tr><tr><td style=text-align:left>%T</td><td style=text-align:left>当前包含日期和时间的 timestamp，如: &lt;2018-03-04 日 19:26></td></tr><tr><td style=text-align:left>%u</td><td style=text-align:left>当前包含日期的未激活的 timestamp，如: [2018-03-04 日]</td></tr><tr><td style=text-align:left>%U</td><td style=text-align:left>当前包含日期和时间的未激活的 timestamp，如: [2018-03-04 日 19:26]</td></tr><tr><td style=text-align:left>%^t</td><td style=text-align:left>类似 %t，但是弹出日历让用户选择日期</td></tr><tr><td style=text-align:left>%^T</td><td style=text-align:left>类似 %T，但是弹出日历让用户选择日期和时间</td></tr><tr><td style=text-align:left>%^u</td><td style=text-align:left>类似 %u，但是弹出日历让用户选择日期</td></tr><tr><td style=text-align:left>%^U</td><td style=text-align:left>类似 %U，但是弹出日历让用户选择日期和时间</td></tr></tbody></table><ul><li>剪切板相关</li></ul><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%c</td><td style=text-align:left>当前 kill ring 中的第一条内容</td></tr><tr><td style=text-align:left>%x</td><td style=text-align:left>当前系统剪贴板中的内容</td></tr><tr><td style=text-align:left>%^C</td><td style=text-align:left>交互式地选择 kill ring 或剪贴板中的内容</td></tr><tr><td style=text-align:left>%^L</td><td style=text-align:left>类似 %^C，但是将选中的内容作为链接插入</td></tr></tbody></table><ul><li>标签相关</li></ul><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%^g</td><td style=text-align:left>交互式地输入标签，并用 target 所在文件中的标签进行补全</td></tr><tr><td style=text-align:left>%^G</td><td style=text-align:left>类似 %^g，但用所有 org-agenda-files 涉及文件中的标签进行补全</td></tr></tbody></table><ul><li>文件相关</li></ul><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%[file]</td><td style=text-align:left>插入文件 /file/ 中的内容</td></tr><tr><td style=text-align:left>%f</td><td style=text-align:left>执行 org-capture 时当前 buffer 对应的文件名</td></tr><tr><td style=text-align:left>%F</td><td style=text-align:left>类似 %f，但输入该文件的绝对路径</td></tr></tbody></table><ul><li>任务相关</li></ul><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%k</td><td style=text-align:left>当前在计时的任务的标题</td></tr><tr><td style=text-align:left>%K</td><td style=text-align:left>当前在计时的任务的链接</td></tr></tbody></table><ul><li>外部链接的信息</li></ul><table><thead><tr><th style=text-align:left>link type</th><th style=text-align:left>description</th></tr></thead><tbody><tr><td style=text-align:left>bbdb</td><td style=text-align:left><a href=https://www.emacswiki.org/emacs/CategoryBbdb>BBDB</a> 联系人数据库记录链接</td></tr><tr><td style=text-align:left>irc</td><td style=text-align:left>IRC 会话链接</td></tr><tr><td style=text-align:left>vm</td><td style=text-align:left><a href=https://www.emacswiki.org/emacs/CategoryViewMail>View Mail</a> 邮件阅读器中的消息、目录链接</td></tr><tr><td style=text-align:left>wl</td><td style=text-align:left><a href=https://www.emacswiki.org/emacs/WanderLust>Wunder Lust</a> 邮件/新闻阅读器中的消息、目录链接</td></tr><tr><td style=text-align:left>mh</td><td style=text-align:left><a href=https://www.emacswiki.org/emacs/MH-E>MH-E</a> 邮件用户代理中的消息、目录链接</td></tr><tr><td style=text-align:left>mew</td><td style=text-align:left><a href=https://www.emacswiki.org/emacs/Mew>MEW</a> 邮件阅读器中的消息链接</td></tr><tr><td style=text-align:left>rmail</td><td style=text-align:left>Emacs 的默认邮件阅读器 <a href=https://www.emacswiki.org/emacs/Rmail>Rmail</a> 中的消息链接</td></tr><tr><td style=text-align:left>gnus</td><td style=text-align:left><a href=http://www.gnus.org/>GNUS</a> 邮件/新闻阅读器中的群组、消息等资源链接</td></tr><tr><td style=text-align:left>eww/w3/w3m</td><td style=text-align:left>在 eww/w3/w3m 中存储的网页链接</td></tr><tr><td style=text-align:left>calendar</td><td style=text-align:left>日历链接</td></tr><tr><td style=text-align:left>org-protocol</td><td style=text-align:left>遵循 org-protocol 协议的外部应用链接</td></tr></tbody></table><p>eww 可用的特殊标记有如下三个：</p><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%:type</td><td style=text-align:left>固定值，eww</td></tr><tr><td style=text-align:left>%:link</td><td style=text-align:left>页面的链接</td></tr><tr><td style=text-align:left>%:description</td><td style=text-align:left>页面的标题，如无则为页面的链接</td></tr></tbody></table><p>org-protocol 可用的特殊标记有如下六个：</p><table><thead><tr><th style=text-align:left>标记</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>%:type</td><td style=text-align:left>链接的类型，如 http/https/ftp 等</td></tr><tr><td style=text-align:left>%:link</td><td style=text-align:left>链接地址，在 org-protocol 里的 url 字段</td></tr><tr><td style=text-align:left>%:description</td><td style=text-align:left>链接的标题，在 org-protocol 里的 title 字段</td></tr><tr><td style=text-align:left>%:annotation</td><td style=text-align:left>靠 url 和 title 完成的 org 格式的链接</td></tr><tr><td style=text-align:left>%:initial</td><td style=text-align:left>链接上选中的文本，在 org-protocol 里的 body 字段</td></tr><tr><td style=text-align:left>%:query</td><td style=text-align:left>org-protocol 上除掉开头和子协议部分的剩下部分</td></tr></tbody></table><h2 id=capture模板示例>Capture模板示例<a hidden class=anchor aria-hidden=true href=#capture模板示例>#</a></h2><h3 id=用-org-capture-做任务管理>用 org-capture 做任务管理<a hidden class=anchor aria-hidden=true href=#用-org-capture-做任务管理>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-el data-lang=el><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-capture-templates</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;t&#34;</span> <span class=s>&#34;Tasks&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-capture-templates</span>
</span></span><span class=line><span class=cl>             <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;tt&#34;</span> <span class=s>&#34;Task&#34;</span> <span class=nv>entry</span>
</span></span><span class=line><span class=cl>               <span class=p>(</span><span class=nv>file+headline</span> <span class=s>&#34;task.org&#34;</span> <span class=s>&#34;Task&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>               <span class=s>&#34;* TODO %^{任务名}\n%u\n%a\n&#34;</span> <span class=nb>:clock-in</span> <span class=no>t</span> <span class=nb>:clock-resume</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-capture-templates</span>
</span></span><span class=line><span class=cl>             <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;tw&#34;</span> <span class=s>&#34;Work Task&#34;</span> <span class=nv>entry</span>
</span></span><span class=line><span class=cl>               <span class=p>(</span><span class=nv>file+headline</span> <span class=s>&#34;work.org&#34;</span> <span class=s>&#34;Work&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>               <span class=s>&#34;* TODO %^{任务名}\n%u\n%a\n&#34;</span> <span class=nb>:clock-in</span> <span class=no>t</span> <span class=nb>:clock-resume</span> <span class=no>t</span><span class=p>))</span>
</span></span></code></pre></div><p>这里需要新建普通任务和工作任务，因此可以创建一个任务分组。</p><h3 id=用-org-capture-新建博客文章>用 org-capture 新建博客文章<a hidden class=anchor aria-hidden=true href=#用-org-capture-新建博客文章>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-el data-lang=el><span class=line><span class=cl><span class=p>(</span><span class=nv>with-eval-after-load</span> <span class=ss>&#39;org-capture</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>defun</span> <span class=nv>dotemacs-org-hugo-new-subtree-post-capture-template</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Returns </span><span class=ss>`org-capture&#39;</span><span class=s> template string for new Hugo post.
</span></span></span><span class=line><span class=cl><span class=s>     See </span><span class=ss>`org-capture-templates&#39;</span><span class=s> for more information.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>let*</span> <span class=p>((</span><span class=nv>title</span> <span class=p>(</span><span class=nv>read-from-minibuffer</span> <span class=s>&#34;Post Title: &#34;</span><span class=p>))</span> <span class=c1>;Prompt to enter the post title</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>fname</span> <span class=p>(</span><span class=nv>org-hugo-slug</span> <span class=nv>title</span><span class=p>))</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>date</span> <span class=p>(</span><span class=nv>format-time-string</span> <span class=p>(</span><span class=nv>org-time-stamp-format</span> <span class=nb>:long</span> <span class=nb>:inactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>org-current-time</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>mapconcat</span> <span class=nf>#&#39;</span><span class=nv>identity</span>
</span></span><span class=line><span class=cl>                 <span class=o>`</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nv>concat</span> <span class=s>&#34;* TODO &#34;</span> <span class=nv>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;:PROPERTIES:&#34;</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nv>concat</span> <span class=s>&#34;:EXPORT_FILE_NAME: &#34;</span> <span class=nv>fname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nv>concat</span> <span class=s>&#34;:EXPORT_DATE: &#34;</span> <span class=nv>date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;:EXPORT_HUGO_CUSTOM_FRONT_MATTER: :comments true :mathjax false&#34;</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;:END:&#34;</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;%?\n&#34;</span><span class=p>)</span>          <span class=c1>;Place the cursor here finally</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;\n&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-capture-templates</span>
</span></span><span class=line><span class=cl>               <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;h&#34;</span>                <span class=c1>;`org-capture&#39; binding + h</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;Hugo post&#34;</span>
</span></span><span class=line><span class=cl>                 <span class=nv>entry</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; It is assumed that below file is present in `org-directory&#39;</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; and that it has a &#34;Hugo Posts&#34; heading. It can even be a</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; symlink pointing to the actual location of all-posts.org!</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=nv>file+olp</span> <span class=s>&#34;hugo-posts.org&#34;</span> <span class=s>&#34;Hugo Posts&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=nv>function</span> <span class=nv>dotemacs-org-hugo-new-subtree-post-capture-template</span><span class=p>)))</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuchengpeng.github.io/tags/emacs/>emacs</a></li><li><a href=https://xuchengpeng.github.io/tags/org-mode/>org-mode</a></li></ul><nav class=paginav><a class=prev href=https://xuchengpeng.github.io/post/emacs-byte-compile/><span class=title>« Prev</span><br><span>Byte Compile Elisp Files</span></a>
<a class=next href=https://xuchengpeng.github.io/post/blog-writing-tools/><span class=title>Next »</span><br><span>博客写作工具</span></a></nav></footer><div class=article-comments><span id=/post/powerful-org-capture/ class=leancloud-visitors data-flag-title=强大的org-capture><span class=post-meta-item-text>文章阅读量</span>
<span class=leancloud-visitors-count>0</span></span><div id=vcomments></div><script src=//unpkg.com/valine/dist/Valine.min.js></script>
<script type=text/javascript>new Valine({el:"#vcomments",appId:"",appKey:"",notify:"",verify:"",avatar:"",placeholder:"",visitor:""})</script></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://xuchengpeng.github.io/>Chuck</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>