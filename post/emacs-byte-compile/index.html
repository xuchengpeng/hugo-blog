<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Byte Compile Elisp Files | Chuck</title><meta name=keywords content="emacs"><meta name=description content="Emacs lisp files can be byte compiled.
Byte compiled elisp file has “.elc” suffix (aka extension). Normal elisp file has “.el” suffix.
Advantage of Byte Compiled Elisp File
Byte compiled elisp files will load faster, and also run faster. (by a simple test of a loop, it seems to run about 4 times faster.)
Another advantage is that byte compiling will often tell you errors or warning in your elisp code that you normally wouldn&rsquo;t know."><meta name=author content="Chuck"><link rel=canonical href=https://xuchengpeng.github.io/post/emacs-byte-compile/><link crossorigin=anonymous href=/assets/css/stylesheet.87a71c9fa3c46cbcceecb41d06747705e92409331a78d74e3ac78ce8b2f38eb1.css integrity="sha256-h6ccn6PEbLzO7LQdBnR3BekkCTMaeNdOOseM6LLzjrE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xuchengpeng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuchengpeng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuchengpeng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://xuchengpeng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://xuchengpeng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Byte Compile Elisp Files"><meta property="og:description" content="Emacs lisp files can be byte compiled.
Byte compiled elisp file has “.elc” suffix (aka extension). Normal elisp file has “.el” suffix.
Advantage of Byte Compiled Elisp File
Byte compiled elisp files will load faster, and also run faster. (by a simple test of a loop, it seems to run about 4 times faster.)
Another advantage is that byte compiling will often tell you errors or warning in your elisp code that you normally wouldn&rsquo;t know."><meta property="og:type" content="article"><meta property="og:url" content="https://xuchengpeng.github.io/post/emacs-byte-compile/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-07-26T12:54:14+08:00"><meta property="article:modified_time" content="2018-07-26T12:54:14+08:00"><meta property="og:site_name" content="Chuck"><meta name=twitter:card content="summary"><meta name=twitter:title content="Byte Compile Elisp Files"><meta name=twitter:description content="Emacs lisp files can be byte compiled.
Byte compiled elisp file has “.elc” suffix (aka extension). Normal elisp file has “.el” suffix.
Advantage of Byte Compiled Elisp File
Byte compiled elisp files will load faster, and also run faster. (by a simple test of a loop, it seems to run about 4 times faster.)
Another advantage is that byte compiling will often tell you errors or warning in your elisp code that you normally wouldn&rsquo;t know."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xuchengpeng.github.io/post/"},{"@type":"ListItem","position":2,"name":"Byte Compile Elisp Files","item":"https://xuchengpeng.github.io/post/emacs-byte-compile/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Byte Compile Elisp Files","name":"Byte Compile Elisp Files","description":"Emacs lisp files can be byte compiled.\nByte compiled elisp file has “.elc” suffix (aka extension). Normal elisp file has “.el” suffix.\nAdvantage of Byte Compiled Elisp File Byte compiled elisp files will load faster, and also run faster. (by a simple test of a loop, it seems to run about 4 times faster.)\nAnother advantage is that byte compiling will often tell you errors or warning in your elisp code that you normally wouldn\u0026rsquo;t know.\n","keywords":["emacs"],"articleBody":"Emacs lisp files can be byte compiled.\nByte compiled elisp file has “.elc” suffix (aka extension). Normal elisp file has “.el” suffix.\nAdvantage of Byte Compiled Elisp File Byte compiled elisp files will load faster, and also run faster. (by a simple test of a loop, it seems to run about 4 times faster.)\nAnother advantage is that byte compiling will often tell you errors or warning in your elisp code that you normally wouldn’t know.\nLoading Byte Compiled File In your init file, when you use load, if you want emacs to load the byte compiled file if it exists, you should not include the “.el” suffix. For example, do it like this:\n;; load elisp file, use byte compiled version (.elc) if exist (load \"my_emacs_keybinding\") ; no file name extension here How to Byte Compile There are several ways to byte compile elisp files. The simplest and most useful are:\nAlt+x byte-compile-file, it’ll prompt for a file name. In dired, Alt+x dired-mark-files-regexp 【% m】 on “.el” files, then Alt+x dired-do-byte-compile 【B】. Byte Compile Alt+x byte-recompile-directory to batch byte compile all elisp files in current dir and sub-directory, if a “.elc” for the file exists, and has a file timestamp older than the “.el” file.\nEvaluate (byte-recompile-directory directory_path 0) to recompile every “.el” file. (regardless whether “.elc” exists.), but still compare timestamp.\nEvaluate (byte-recompile-directory directory_path 0 t) to recompile every “.el” file. (regardless whether “.elc” exists and regardless of timestamp.)\nEvaluate (byte-recompile-directory directory_path nil t) to byte compile all “.el” file that has a existing “.elc” file. (regardless of timestamp.)\nRecompile When Upgrade When you upgrade to a new emcas version, or upgrade packages, or bring over your byte compiled elisp directory from one machine to another, you should recompile your elisp files, because often, emacs has some incompatible elisp changes, and big packages may fail without recompile.\n","wordCount":"309","inLanguage":"en","datePublished":"2018-07-26T12:54:14+08:00","dateModified":"2018-07-26T12:54:14+08:00","author":{"@type":"Person","name":"Chuck"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuchengpeng.github.io/post/emacs-byte-compile/"},"publisher":{"@type":"Organization","name":"Chuck","logo":{"@type":"ImageObject","url":"https://xuchengpeng.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuchengpeng.github.io/ accesskey=h title="Chuck (Alt + H)"><img src=https://xuchengpeng.github.io/apple-touch-icon.png alt aria-label=logo height=35>Chuck</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuchengpeng.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://xuchengpeng.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://xuchengpeng.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://xuchengpeng.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://xuchengpeng.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuchengpeng.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://xuchengpeng.github.io/post/>Posts</a></div><h1 class=post-title>Byte Compile Elisp Files</h1><div class=post-meta><span title='2018-07-26 12:54:14 +0800 +0800'>July 26, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;309 words&nbsp;·&nbsp;Chuck&nbsp;|&nbsp;<a href=https://github.com/xuchengpeng/xuchengpeng.github.io/tree/main/content/post/emacs-byte-compile.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#advantage-of-byte-compiled-elisp-file>Advantage of Byte Compiled Elisp File</a></li><li><a href=#loading-byte-compiled-file>Loading Byte Compiled File</a></li><li><a href=#how-to-byte-compile>How to Byte Compile</a></li><li><a href=#byte-compile>Byte Compile</a></li><li><a href=#recompile-when-upgrade>Recompile When Upgrade</a></li></ul></nav></div></details></div><div class=post-content><p>Emacs lisp files can be byte compiled.</p><p>Byte compiled elisp file has “.elc” suffix (aka extension). Normal elisp file has “.el” suffix.</p><h2 id=advantage-of-byte-compiled-elisp-file>Advantage of Byte Compiled Elisp File<a hidden class=anchor aria-hidden=true href=#advantage-of-byte-compiled-elisp-file>#</a></h2><p>Byte compiled elisp files will load faster, and also run faster. (by a simple test of a loop, it seems to run about 4 times faster.)</p><p>Another advantage is that byte compiling will often tell you errors or warning in your elisp code that you normally wouldn&rsquo;t know.</p><h2 id=loading-byte-compiled-file>Loading Byte Compiled File<a hidden class=anchor aria-hidden=true href=#loading-byte-compiled-file>#</a></h2><p>In your init file, when you use <strong>load</strong>, if you want emacs to load the byte compiled file if it exists, you should not include the “.el” suffix. For example, do it like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-elisp data-lang=elisp><span class=line><span class=cl><span class=c1>;; load elisp file, use byte compiled version (.elc) if exist</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>load</span> <span class=s>&#34;my_emacs_keybinding&#34;</span><span class=p>)</span> <span class=c1>; no file name extension here</span>
</span></span></code></pre></div><h2 id=how-to-byte-compile>How to Byte Compile<a hidden class=anchor aria-hidden=true href=#how-to-byte-compile>#</a></h2><p>There are several ways to byte compile elisp files. The simplest and most useful are:</p><ul><li><code>Alt+x</code> <strong>byte-compile-file</strong>, it&rsquo;ll prompt for a file name.</li><li>In dired, <code>Alt+x</code> <strong>dired-mark-files-regexp</strong> 【% m】 on “.el” files, then <code>Alt+x</code> <strong>dired-do-byte-compile</strong> 【B】.</li></ul><h2 id=byte-compile>Byte Compile<a hidden class=anchor aria-hidden=true href=#byte-compile>#</a></h2><p><code>Alt+x</code> <strong>byte-recompile-directory</strong> to batch byte compile all elisp files in current dir and sub-directory, if a “.elc” for the file exists, and has a file timestamp older than the “.el” file.</p><p>Evaluate (byte-recompile-directory directory_path 0) to recompile every “.el” file. (regardless whether “.elc” exists.), but still compare timestamp.</p><p>Evaluate (byte-recompile-directory directory_path 0 t) to recompile every “.el” file. (regardless whether “.elc” exists and regardless of timestamp.)</p><p>Evaluate (byte-recompile-directory directory_path nil t) to byte compile all “.el” file that has a existing “.elc” file. (regardless of timestamp.)</p><h2 id=recompile-when-upgrade>Recompile When Upgrade<a hidden class=anchor aria-hidden=true href=#recompile-when-upgrade>#</a></h2><p>When you upgrade to a new emcas version, or upgrade packages, or bring over your byte compiled elisp directory from one machine to another, you should recompile your elisp files, because often, emacs has some incompatible elisp changes, and big packages may fail without recompile.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuchengpeng.github.io/tags/emacs/>emacs</a></li></ul><nav class=paginav><a class=prev href=https://xuchengpeng.github.io/post/rsync-elpa-mirror/><span class=title>« Prev</span><br><span>rsync elpa mirror</span></a>
<a class=next href=https://xuchengpeng.github.io/post/powerful-org-capture/><span class=title>Next »</span><br><span>强大的org-capture</span></a></nav></footer><div class=article-comments><span id=/post/emacs-byte-compile/ class=leancloud-visitors data-flag-title="Byte Compile Elisp Files"><span class=post-meta-item-text>文章阅读量</span>
<span class=leancloud-visitors-count>0</span></span><div id=vcomments></div><script src=//unpkg.com/valine/dist/Valine.min.js></script>
<script type=text/javascript>new Valine({el:"#vcomments",appId:"8cGx0mI721mXnuSact0PLKmV-gzGzoHsz",appKey:"eQc0CtLv9s4VTdObz6ux8lVW",notify:"false",verify:"false",avatar:"wavatar",placeholder:"Leave your comments here...",visitor:"true"})</script></div></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; 2023 <a href=https://xuchengpeng.github.io/>Chuck</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>