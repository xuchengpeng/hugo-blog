<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>rsync elpa mirror | Chuck</title>
<meta name=keywords content="rsync,emacs"><meta name=description content="rsync is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.
rsync is a file transfer program for Unix systems. rsync uses the &ldquo;rsync algorithm&rdquo; which provides a very fast method for bringing remote files into sync. It does this by sending just the differences in the files across the link, without requiring that both sets of files are present at one of the ends of the link beforehand.
Some features of rsync include

can update whole directory trees and filesystems
optionally preserves symbolic links, hard links, file ownership, permissions, devices and times
requires no special privileges to install
internal pipelining reduces latency for multiple files
can use rsh, ssh or direct sockets as the transport
supports anonymous rsync which is ideal for mirroring
"><meta name=author content="Chuck"><link rel=canonical href=https://xuchengpeng.github.io/hugo-blog/post/rsync-elpa-mirror/><link crossorigin=anonymous href=/hugo-blog/assets/css/stylesheet.6a1981a06069ce515e31f1650c200b27bf6710e07287d012d0847047ba995307.css integrity="sha256-ahmBoGBpzlFeMfFlDCALJ79nEOByh9AS0IRwR7qZUwc=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/hugo-blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://xuchengpeng.github.io/hugo-blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuchengpeng.github.io/hugo-blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuchengpeng.github.io/hugo-blog/favicon-32x32.png><link rel=apple-touch-icon href=https://xuchengpeng.github.io/hugo-blog/apple-touch-icon.png><link rel=mask-icon href=https://xuchengpeng.github.io/hugo-blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="rsync elpa mirror"><meta property="og:description" content="rsync is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.
rsync is a file transfer program for Unix systems. rsync uses the &ldquo;rsync algorithm&rdquo; which provides a very fast method for bringing remote files into sync. It does this by sending just the differences in the files across the link, without requiring that both sets of files are present at one of the ends of the link beforehand.
Some features of rsync include

can update whole directory trees and filesystems
optionally preserves symbolic links, hard links, file ownership, permissions, devices and times
requires no special privileges to install
internal pipelining reduces latency for multiple files
can use rsh, ssh or direct sockets as the transport
supports anonymous rsync which is ideal for mirroring
"><meta property="og:type" content="article"><meta property="og:url" content="https://xuchengpeng.github.io/hugo-blog/post/rsync-elpa-mirror/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-08-06T16:48:15+08:00"><meta property="article:modified_time" content="2018-08-06T16:48:15+08:00"><meta property="og:site_name" content="Chuck"><meta name=twitter:card content="summary"><meta name=twitter:title content="rsync elpa mirror"><meta name=twitter:description content="rsync is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.
rsync is a file transfer program for Unix systems. rsync uses the &ldquo;rsync algorithm&rdquo; which provides a very fast method for bringing remote files into sync. It does this by sending just the differences in the files across the link, without requiring that both sets of files are present at one of the ends of the link beforehand.
Some features of rsync include

can update whole directory trees and filesystems
optionally preserves symbolic links, hard links, file ownership, permissions, devices and times
requires no special privileges to install
internal pipelining reduces latency for multiple files
can use rsh, ssh or direct sockets as the transport
supports anonymous rsync which is ideal for mirroring
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://xuchengpeng.github.io/hugo-blog/post/"},{"@type":"ListItem","position":3,"name":"rsync elpa mirror","item":"https://xuchengpeng.github.io/hugo-blog/post/rsync-elpa-mirror/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"rsync elpa mirror","name":"rsync elpa mirror","description":"rsync is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.\nrsync is a file transfer program for Unix systems. rsync uses the \u0026ldquo;rsync algorithm\u0026rdquo; which provides a very fast method for bringing remote files into sync. It does this by sending just the differences in the files across the link, without requiring that both sets of files are present at one of the ends of the link beforehand. Some features of rsync include\ncan update whole directory trees and filesystems optionally preserves symbolic links, hard links, file ownership, permissions, devices and times requires no special privileges to install internal pipelining reduces latency for multiple files can use rsh, ssh or direct sockets as the transport supports anonymous rsync which is ideal for mirroring ","keywords":["rsync","emacs"],"articleBody":"rsync is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.\nrsync is a file transfer program for Unix systems. rsync uses the “rsync algorithm” which provides a very fast method for bringing remote files into sync. It does this by sending just the differences in the files across the link, without requiring that both sets of files are present at one of the ends of the link beforehand. Some features of rsync include\ncan update whole directory trees and filesystems optionally preserves symbolic links, hard links, file ownership, permissions, devices and times requires no special privileges to install internal pipelining reduces latency for multiple files can use rsh, ssh or direct sockets as the transport supports anonymous rsync which is ideal for mirroring rsync command rsync [OPTION]... SRC [SRC]... DEST rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST rsync [OPTION]... [USER@]HOST:SRC [DEST] rsync [OPTION]... [USER@]HOST::SRC [DEST] rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST] Options Summary -v, --verbose 详细模式输出 -q, --quiet 精简输出模式 -c, --checksum 打开校验开关，强制对文件传输进行校验 -a, --archive 归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD -r, --recursive 对子目录以递归模式处理 -R, --relative 使用相对路径信息 -b, --backup 创建备份，也就是对于目的已经存在有同样的文件名时，将老的文件重新命名为~filename。可以使用--suffix选项来指定不同的备份文件前缀。 --backup-dir 将备份文件(如~filename)存放在在目录下。 -suffix=SUFFIX 定义备份文件前缀 -u, --update 仅仅进行更新，也就是跳过所有已经存在于DST，并且文件时间晚于要备份的文件。(不覆盖更新的文件) -l, --links 保留软链结 -L, --copy-links 想对待常规文件一样处理软链结 --copy-unsafe-links 仅仅拷贝指向SRC路径目录树以外的链结 --safe-links 忽略指向SRC路径目录树以外的链结 -H, --hard-links 保留硬链结 -p, --perms 保持文件权限 -o, --owner 保持文件属主信息 -g, --group 保持文件属组信息 -D, --devices 保持设备文件信息 -t, --times 保持文件时间信息 -S, --sparse 对稀疏文件进行特殊处理以节省DST的空间 -n, --dry-run 现实哪些文件将被传输 -W, --whole-file 拷贝文件，不进行增量检测 -x, --one-file-system 不要跨越文件系统边界 -B, --block-size=SIZE 检验算法使用的块尺寸，默认是700字节 -e, --rsh=COMMAND 指定使用rsh、ssh方式进行数据同步 --rsync-path=PATH 指定远程服务器上的rsync命令所在路径信息 -C, --cvs-exclude 使用和CVS一样的方法自动忽略文件，用来排除那些不希望传输的文件 --existing 仅仅更新那些已经存在于DST的文件，而不备份那些新创建的文件 --delete 删除那些DST中SRC没有的文件 --delete-excluded 同样删除接收端那些被该选项指定排除的文件 --delete-after 传输结束以后再删除 --ignore-errors 及时出现IO错误也进行删除 --max-delete=NUM 最多删除NUM个文件 --partial 保留那些因故没有完全传输的文件，以是加快随后的再次传输 --force 强制删除目录，即使不为空 --numeric-ids 不将数字的用户和组ID匹配为用户名和组名 --timeout=TIME IP 超时时间，单位为秒 -I, --ignore-times 不跳过那些有同样的时间和长度的文件 --size-only 当决定是否要备份文件时，仅仅察看文件大小而不考虑文件时间 --modify-window=NUM 决定文件是否时间相同时使用的时间戳窗口，默认为0 -T --temp-dir=DIR 在DIR中创建临时文件 --compare-dest=DIR 同样比较DIR中的文件来决定是否需要备份 -P 等同于 --partial --progress 显示备份过程 -z, --compress 对备份的文件在传输时进行压缩处理 --exclude=PATTERN 指定排除不需要传输的文件模式 --include=PATTERN 指定不排除而需要传输的文件模式 --exclude-from=FILE 排除FILE中指定模式的文件 --include-from=FILE 不排除FILE指定模式匹配的文件 --version 打印版本信息 --address 绑定到特定的地址 --config=FILE 指定其他的配置文件，不使用默认的rsyncd.conf文件 --port=PORT 指定其他的rsync服务端口 --blocking-io 对远程shell使用阻塞IO -stats 给出某些文件的传输状态 --progress 在传输时现实传输过程 --log-format=formAT 指定日志文件格式 --password-file=FILE 从FILE中得到密码 --bwlimit=KBPS 限制I/O带宽，KBytes per second -h, --help 显示帮助信息 rsync elpa mirror rsync -avz --delete --progress rsync://elpa.gnu.org/elpa/ ./rsync/gnu rsync -avz --delete --progress rsync://melpa.org/packages/ ./rsync/melpa rsync -avz --delete --progress rsync://melpa.org/packages-stable/ ./rsync/melpa-stable Clone ELPA archive Use elpa-clone to clone elpa archive.\n#!/bin/bash set -ev export TZ='Asia/Shanghai' SCRIPTPATH=$(cd $(dirname $0); pwd -P) \u0026\u0026 cd $SCRIPTPATH elpa_clone_path=.elpa-clone rm -rf $elpa_clone_path git clone --depth 1 https://github.com/dochang/elpa-clone.git $elpa_clone_path function clone { echo \"Updating mirror for $2 ($1)\" emacs -l \"$elpa_clone_path/elpa-clone.el\" -nw --batch --eval=\"(elpa-clone \\\"$1\\\" \\\"$SCRIPTPATH/$2\\\")\" } mkdir rsync clone \"rsync://elpa.gnu.org/elpa/\" \"./rsync/gnu\" clone \"rsync://melpa.org/packages/\" \"./rsync/melpa\" clone \"rsync://melpa.org/packages-stable/\" \"./rsync/melpa-stable\" clone \"http://orgmode.org/elpa/\" \"./rsync/org\" ","wordCount":"417","inLanguage":"en","datePublished":"2018-08-06T16:48:15+08:00","dateModified":"2018-08-06T16:48:15+08:00","author":{"@type":"Person","name":"Chuck"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuchengpeng.github.io/hugo-blog/post/rsync-elpa-mirror/"},"publisher":{"@type":"Organization","name":"Chuck","logo":{"@type":"ImageObject","url":"https://xuchengpeng.github.io/hugo-blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuchengpeng.github.io/hugo-blog accesskey=h title="Chuck (Alt + H)"><img src=https://xuchengpeng.github.io/apple-touch-icon.png alt aria-label=logo height=35>Chuck</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuchengpeng.github.io/hugo-blog/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://xuchengpeng.github.io/hugo-blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://xuchengpeng.github.io/hugo-blog/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://xuchengpeng.github.io/hugo-blog/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://xuchengpeng.github.io/hugo-blog/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuchengpeng.github.io/hugo-blog>Home</a>&nbsp;»&nbsp;<a href=https://xuchengpeng.github.io/hugo-blog/post/>Posts</a></div><h1 class=post-title>rsync elpa mirror</h1><div class=post-meta>&lt;span title='2018-08-06 16:48:15 +0800 +0800'>August 6, 2018&lt;/span>&amp;nbsp;·&amp;nbsp;2 min&amp;nbsp;·&amp;nbsp;417 words&amp;nbsp;·&amp;nbsp;Chuck&nbsp;|&nbsp;<a href=https://github.com/xuchengpeng/xuchengpeng.github.io/tree/main/content/post/rsync-elpa-mirror.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#rsync-command>rsync command</a></li><li><a href=#rsync-elpa-mirror>rsync elpa mirror</a></li><li><a href=#clone-elpa-archive>Clone ELPA archive</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p><a href=https://rsync.samba.org/>rsync</a> is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.</p><p>rsync is a file transfer program for Unix systems. rsync uses the &ldquo;rsync algorithm&rdquo; which provides a very fast method for bringing remote files into sync. It does this by sending just the differences in the files across the link, without requiring that both sets of files are present at one of the ends of the link beforehand.
Some features of rsync include</p><ul><li>can update whole directory trees and filesystems</li><li>optionally preserves symbolic links, hard links, file ownership, permissions, devices and times</li><li>requires no special privileges to install</li><li>internal pipelining reduces latency for multiple files</li><li>can use rsh, ssh or direct sockets as the transport</li><li>supports anonymous rsync which is ideal for mirroring</li></ul><h3 id=rsync-command>rsync command<a hidden class=anchor aria-hidden=true href=#rsync-command>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... SRC <span class=o>[</span>SRC<span class=o>]</span>... DEST
</span></span><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... SRC <span class=o>[</span>SRC<span class=o>]</span>... <span class=o>[</span>USER@<span class=o>]</span>HOST:DEST
</span></span><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... SRC <span class=o>[</span>SRC<span class=o>]</span>... <span class=o>[</span>USER@<span class=o>]</span>HOST::DEST
</span></span><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... SRC <span class=o>[</span>SRC<span class=o>]</span>... rsync://<span class=o>[</span>USER@<span class=o>]</span>HOST<span class=o>[</span>:PORT<span class=o>]</span>/DEST
</span></span><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... <span class=o>[</span>USER@<span class=o>]</span>HOST:SRC <span class=o>[</span>DEST<span class=o>]</span>
</span></span><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... <span class=o>[</span>USER@<span class=o>]</span>HOST::SRC <span class=o>[</span>DEST<span class=o>]</span>
</span></span><span class=line><span class=cl>rsync <span class=o>[</span>OPTION<span class=o>]</span>... rsync://<span class=o>[</span>USER@<span class=o>]</span>HOST<span class=o>[</span>:PORT<span class=o>]</span>/SRC <span class=o>[</span>DEST<span class=o>]</span>
</span></span></code></pre></div><table><thead><tr><th style=text-align:left>Options</th><th style=text-align:left>Summary</th></tr></thead><tbody><tr><td style=text-align:left>-v, --verbose</td><td style=text-align:left>详细模式输出</td></tr><tr><td style=text-align:left>-q, --quiet</td><td style=text-align:left>精简输出模式</td></tr><tr><td style=text-align:left>-c, --checksum</td><td style=text-align:left>打开校验开关，强制对文件传输进行校验</td></tr><tr><td style=text-align:left>-a, --archive</td><td style=text-align:left>归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD</td></tr><tr><td style=text-align:left>-r, --recursive</td><td style=text-align:left>对子目录以递归模式处理</td></tr><tr><td style=text-align:left>-R, --relative</td><td style=text-align:left>使用相对路径信息</td></tr><tr><td style=text-align:left>-b, --backup</td><td style=text-align:left>创建备份，也就是对于目的已经存在有同样的文件名时，将老的文件重新命名为~filename。可以使用--suffix选项来指定不同的备份文件前缀。</td></tr><tr><td style=text-align:left>--backup-dir</td><td style=text-align:left>将备份文件(如~filename)存放在在目录下。</td></tr><tr><td style=text-align:left>-suffix=SUFFIX</td><td style=text-align:left>定义备份文件前缀</td></tr><tr><td style=text-align:left>-u, --update</td><td style=text-align:left>仅仅进行更新，也就是跳过所有已经存在于DST，并且文件时间晚于要备份的文件。(不覆盖更新的文件)</td></tr><tr><td style=text-align:left>-l, --links</td><td style=text-align:left>保留软链结</td></tr><tr><td style=text-align:left>-L, --copy-links</td><td style=text-align:left>想对待常规文件一样处理软链结</td></tr><tr><td style=text-align:left>--copy-unsafe-links</td><td style=text-align:left>仅仅拷贝指向SRC路径目录树以外的链结</td></tr><tr><td style=text-align:left>--safe-links</td><td style=text-align:left>忽略指向SRC路径目录树以外的链结</td></tr><tr><td style=text-align:left>-H, --hard-links</td><td style=text-align:left>保留硬链结</td></tr><tr><td style=text-align:left>-p, --perms</td><td style=text-align:left>保持文件权限</td></tr><tr><td style=text-align:left>-o, --owner</td><td style=text-align:left>保持文件属主信息</td></tr><tr><td style=text-align:left>-g, --group</td><td style=text-align:left>保持文件属组信息</td></tr><tr><td style=text-align:left>-D, --devices</td><td style=text-align:left>保持设备文件信息</td></tr><tr><td style=text-align:left>-t, --times</td><td style=text-align:left>保持文件时间信息</td></tr><tr><td style=text-align:left>-S, --sparse</td><td style=text-align:left>对稀疏文件进行特殊处理以节省DST的空间</td></tr><tr><td style=text-align:left>-n, --dry-run</td><td style=text-align:left>现实哪些文件将被传输</td></tr><tr><td style=text-align:left>-W, --whole-file</td><td style=text-align:left>拷贝文件，不进行增量检测</td></tr><tr><td style=text-align:left>-x, --one-file-system</td><td style=text-align:left>不要跨越文件系统边界</td></tr><tr><td style=text-align:left>-B, --block-size=SIZE</td><td style=text-align:left>检验算法使用的块尺寸，默认是700字节</td></tr><tr><td style=text-align:left>-e, --rsh=COMMAND</td><td style=text-align:left>指定使用rsh、ssh方式进行数据同步</td></tr><tr><td style=text-align:left>--rsync-path=PATH</td><td style=text-align:left>指定远程服务器上的rsync命令所在路径信息</td></tr><tr><td style=text-align:left>-C, --cvs-exclude</td><td style=text-align:left>使用和CVS一样的方法自动忽略文件，用来排除那些不希望传输的文件</td></tr><tr><td style=text-align:left>--existing</td><td style=text-align:left>仅仅更新那些已经存在于DST的文件，而不备份那些新创建的文件</td></tr><tr><td style=text-align:left>--delete</td><td style=text-align:left>删除那些DST中SRC没有的文件</td></tr><tr><td style=text-align:left>--delete-excluded</td><td style=text-align:left>同样删除接收端那些被该选项指定排除的文件</td></tr><tr><td style=text-align:left>--delete-after</td><td style=text-align:left>传输结束以后再删除</td></tr><tr><td style=text-align:left>--ignore-errors</td><td style=text-align:left>及时出现IO错误也进行删除</td></tr><tr><td style=text-align:left>--max-delete=NUM</td><td style=text-align:left>最多删除NUM个文件</td></tr><tr><td style=text-align:left>--partial</td><td style=text-align:left>保留那些因故没有完全传输的文件，以是加快随后的再次传输</td></tr><tr><td style=text-align:left>--force</td><td style=text-align:left>强制删除目录，即使不为空</td></tr><tr><td style=text-align:left>--numeric-ids</td><td style=text-align:left>不将数字的用户和组ID匹配为用户名和组名</td></tr><tr><td style=text-align:left>--timeout=TIME IP</td><td style=text-align:left>超时时间，单位为秒</td></tr><tr><td style=text-align:left>-I, --ignore-times</td><td style=text-align:left>不跳过那些有同样的时间和长度的文件</td></tr><tr><td style=text-align:left>--size-only</td><td style=text-align:left>当决定是否要备份文件时，仅仅察看文件大小而不考虑文件时间</td></tr><tr><td style=text-align:left>--modify-window=NUM</td><td style=text-align:left>决定文件是否时间相同时使用的时间戳窗口，默认为0</td></tr><tr><td style=text-align:left>-T --temp-dir=DIR</td><td style=text-align:left>在DIR中创建临时文件</td></tr><tr><td style=text-align:left>--compare-dest=DIR</td><td style=text-align:left>同样比较DIR中的文件来决定是否需要备份</td></tr><tr><td style=text-align:left>-P</td><td style=text-align:left>等同于 --partial</td></tr><tr><td style=text-align:left>--progress</td><td style=text-align:left>显示备份过程</td></tr><tr><td style=text-align:left>-z, --compress</td><td style=text-align:left>对备份的文件在传输时进行压缩处理</td></tr><tr><td style=text-align:left>--exclude=PATTERN</td><td style=text-align:left>指定排除不需要传输的文件模式</td></tr><tr><td style=text-align:left>--include=PATTERN</td><td style=text-align:left>指定不排除而需要传输的文件模式</td></tr><tr><td style=text-align:left>--exclude-from=FILE</td><td style=text-align:left>排除FILE中指定模式的文件</td></tr><tr><td style=text-align:left>--include-from=FILE</td><td style=text-align:left>不排除FILE指定模式匹配的文件</td></tr><tr><td style=text-align:left>--version</td><td style=text-align:left>打印版本信息</td></tr><tr><td style=text-align:left>--address</td><td style=text-align:left>绑定到特定的地址</td></tr><tr><td style=text-align:left>--config=FILE</td><td style=text-align:left>指定其他的配置文件，不使用默认的rsyncd.conf文件</td></tr><tr><td style=text-align:left>--port=PORT</td><td style=text-align:left>指定其他的rsync服务端口</td></tr><tr><td style=text-align:left>--blocking-io</td><td style=text-align:left>对远程shell使用阻塞IO</td></tr><tr><td style=text-align:left>-stats</td><td style=text-align:left>给出某些文件的传输状态</td></tr><tr><td style=text-align:left>--progress</td><td style=text-align:left>在传输时现实传输过程</td></tr><tr><td style=text-align:left>--log-format=formAT</td><td style=text-align:left>指定日志文件格式</td></tr><tr><td style=text-align:left>--password-file=FILE</td><td style=text-align:left>从FILE中得到密码</td></tr><tr><td style=text-align:left>--bwlimit=KBPS</td><td style=text-align:left>限制I/O带宽，KBytes per second</td></tr><tr><td style=text-align:left>-h, --help</td><td style=text-align:left>显示帮助信息</td></tr></tbody></table><h3 id=rsync-elpa-mirror>rsync elpa mirror<a hidden class=anchor aria-hidden=true href=#rsync-elpa-mirror>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>rsync -avz --delete --progress rsync://elpa.gnu.org/elpa/ ./rsync/gnu
</span></span><span class=line><span class=cl>rsync -avz --delete --progress rsync://melpa.org/packages/ ./rsync/melpa
</span></span><span class=line><span class=cl>rsync -avz --delete --progress rsync://melpa.org/packages-stable/ ./rsync/melpa-stable
</span></span></code></pre></div><h3 id=clone-elpa-archive>Clone ELPA archive<a hidden class=anchor aria-hidden=true href=#clone-elpa-archive>#</a></h3><p>Use <a href=https://github.com/dochang/elpa-clone>elpa-clone</a> to clone elpa archive.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>set</span> -ev
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>TZ</span><span class=o>=</span><span class=s1>&#39;Asia/Shanghai&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>SCRIPTPATH</span><span class=o>=</span><span class=k>$(</span><span class=nb>cd</span> <span class=k>$(</span>dirname <span class=nv>$0</span><span class=k>)</span><span class=p>;</span> <span class=nb>pwd</span> -P<span class=k>)</span> <span class=o>&amp;&amp;</span> <span class=nb>cd</span> <span class=nv>$SCRIPTPATH</span>
</span></span><span class=line><span class=cl><span class=nv>elpa_clone_path</span><span class=o>=</span>.elpa-clone
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rm -rf <span class=nv>$elpa_clone_path</span>
</span></span><span class=line><span class=cl>git clone --depth <span class=m>1</span> https://github.com/dochang/elpa-clone.git <span class=nv>$elpa_clone_path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> clone <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Updating mirror for </span><span class=nv>$2</span><span class=s2> (</span><span class=nv>$1</span><span class=s2>)&#34;</span>
</span></span><span class=line><span class=cl>  emacs -l <span class=s2>&#34;</span><span class=nv>$elpa_clone_path</span><span class=s2>/elpa-clone.el&#34;</span> -nw --batch --eval<span class=o>=</span><span class=s2>&#34;(elpa-clone \&#34;</span><span class=nv>$1</span><span class=s2>\&#34; \&#34;</span><span class=nv>$SCRIPTPATH</span><span class=s2>/</span><span class=nv>$2</span><span class=s2>\&#34;)&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mkdir rsync
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>clone <span class=s2>&#34;rsync://elpa.gnu.org/elpa/&#34;</span> <span class=s2>&#34;./rsync/gnu&#34;</span>
</span></span><span class=line><span class=cl>clone <span class=s2>&#34;rsync://melpa.org/packages/&#34;</span> <span class=s2>&#34;./rsync/melpa&#34;</span>
</span></span><span class=line><span class=cl>clone <span class=s2>&#34;rsync://melpa.org/packages-stable/&#34;</span> <span class=s2>&#34;./rsync/melpa-stable&#34;</span>
</span></span><span class=line><span class=cl>clone <span class=s2>&#34;http://orgmode.org/elpa/&#34;</span> <span class=s2>&#34;./rsync/org&#34;</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuchengpeng.github.io/hugo-blog/tags/rsync/>rsync</a></li><li><a href=https://xuchengpeng.github.io/hugo-blog/tags/emacs/>emacs</a></li></ul><nav class=paginav><a class=prev href=https://xuchengpeng.github.io/hugo-blog/post/amd-release-threadripper2/><span class=title>« Prev</span><br><span>AMD发布第二代Threadripper</span>
</a><a class=next href=https://xuchengpeng.github.io/hugo-blog/post/emacs-byte-compile/><span class=title>Next »</span><br><span>Byte Compile Elisp Files</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=xuchengpeng/xuchengpeng.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNDA1MzI1NTA=" data-category=Comments data-category-id=DIC_kwDOCGBbRs4CUv2b data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; 2024 <a href=https://xuchengpeng.github.io/hugo-blog>Chuck</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>