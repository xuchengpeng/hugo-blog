<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>自定义emacs mode-line | Chuck</title><meta name=keywords content="mode-line,diminish"><meta name=description content="一些常用的mode-line包

powerline
smart-mode-line
spaceline
telephone-line

了解mode-line
mode-line初始值：
(&#34;%e&#34; mode-line-front-space mode-line-mule-info mode-line-client mode-line-modified mode-line-remote mode-line-frame-identification mode-line-buffer-identification &#34;   &#34; mode-line-position
 (vc-mode vc-mode)
 &#34;  &#34; mode-line-modes mode-line-misc-info mode-line-end-spaces)
"><meta name=author content="Chuck"><link rel=canonical href=https://xuchengpeng.github.io/post/customize-emacs-mode-line/><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xuchengpeng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuchengpeng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuchengpeng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://xuchengpeng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://xuchengpeng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="自定义emacs mode-line"><meta property="og:description" content="一些常用的mode-line包

powerline
smart-mode-line
spaceline
telephone-line

了解mode-line
mode-line初始值：
(&#34;%e&#34; mode-line-front-space mode-line-mule-info mode-line-client mode-line-modified mode-line-remote mode-line-frame-identification mode-line-buffer-identification &#34;   &#34; mode-line-position
 (vc-mode vc-mode)
 &#34;  &#34; mode-line-modes mode-line-misc-info mode-line-end-spaces)
"><meta property="og:type" content="article"><meta property="og:url" content="https://xuchengpeng.github.io/post/customize-emacs-mode-line/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-07-09T09:59:51+08:00"><meta property="article:modified_time" content="2018-07-09T09:59:51+08:00"><meta property="og:site_name" content="Chuck"><meta name=twitter:card content="summary"><meta name=twitter:title content="自定义emacs mode-line"><meta name=twitter:description content="一些常用的mode-line包

powerline
smart-mode-line
spaceline
telephone-line

了解mode-line
mode-line初始值：
(&#34;%e&#34; mode-line-front-space mode-line-mule-info mode-line-client mode-line-modified mode-line-remote mode-line-frame-identification mode-line-buffer-identification &#34;   &#34; mode-line-position
 (vc-mode vc-mode)
 &#34;  &#34; mode-line-modes mode-line-misc-info mode-line-end-spaces)
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xuchengpeng.github.io/post/"},{"@type":"ListItem","position":2,"name":"自定义emacs mode-line","item":"https://xuchengpeng.github.io/post/customize-emacs-mode-line/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"自定义emacs mode-line","name":"自定义emacs mode-line","description":"一些常用的mode-line包 powerline smart-mode-line spaceline telephone-line 了解mode-line mode-line初始值：\n(\u0026#34;%e\u0026#34; mode-line-front-space mode-line-mule-info mode-line-client mode-line-modified mode-line-remote mode-line-frame-identification mode-line-buffer-identification \u0026#34; \u0026#34; mode-line-position (vc-mode vc-mode) \u0026#34; \u0026#34; mode-line-modes mode-line-misc-info mode-line-end-spaces) ","keywords":["mode-line","diminish"],"articleBody":"一些常用的mode-line包 powerline smart-mode-line spaceline telephone-line 了解mode-line mode-line初始值：\n(\"%e\" mode-line-front-space mode-line-mule-info mode-line-client mode-line-modified mode-line-remote mode-line-frame-identification mode-line-buffer-identification \" \" mode-line-position (vc-mode vc-mode) \" \" mode-line-modes mode-line-misc-info mode-line-end-spaces) mode-line变量 mode-line-mule-info：显示当前语言环境、编码信息和输入法； mode-line-modified：显示当前内容是否被修改，**表示已经被修改，--表示没有被修改，%%表示只读，%*表示只读但是被修改； mode-line-frame-identification：用来标识当前窗口； mode-line-buffer-identification：用来表示当前buffer； mode-line-position：用来表示在buffer中的位置，可显示位置百分比、buffer大小、当前行号和列号； mode-line-percent-position：在mode-line-position中被使用； vc-mode：显示版本管理信息； mode-line-modes：显示当前major和minor modes； mode-line-remote：用来显示当前buffer的default-directory是否是远程文件夹； mode-line-client：用来表示emacsclient窗口； mode-name： 显示当前buffer的major mode； mode-line-front-space：显示在mode-line最前面； mode-line-end-spaces：显示在mode-line最后面； mode-line-misc-info：显示杂项信息； minor-mode-alist：包含当前buffer激活的所有minor modes； global-mode-string：This variable holds a mode line construct that, by default, appears in the mode line just after the which-func-mode minor mode if set, else after mode-line-modes. The command display-time sets global-mode-string to refer to the variable display-time-string, which holds a string containing the time and load information. The ‘%M’ construct substitutes the value of global-mode-string, but that is obsolete, since the variable is included in the mode line from mode-line-format. %-Constructs in the Mode Line %b：当前buffer名称； %c：当前列号，从最左边0开始计算； %C：当前列号，从最左边1开始计算； %e：When Emacs is nearly out of memory for Lisp objects, a brief message saying so. Otherwise, this is empty. %f：文件名； %F：窗口名称； %i：当前buffer大小； %I：Like ‘%i’, but the size is printed in a more readable way by using ‘k’ for 10^3, ‘M’ for 10^6, ‘G’ for 10^9, etc., to abbreviate. %l：当前行号； %n：‘Narrow’ when narrowing is in effect; nothing otherwise. %o：The degree of travel of the window through (the visible portion of) the buffer, i.e. the size of the text above the top of the window expressed as a percentage of all the text outside the window, or ‘Top’, ‘Bottom’ or ‘All’. %p：The percentage of the buffer text above the top of window, or ‘Top’, ‘Bottom’ or ‘All’. Note that the default mode line construct truncates this to three characters. %P：The percentage of the buffer text that is above the bottom of the window (which includes the text visible in the window, as well as the text above the top), plus ‘Top’ if the top of the buffer is visible on screen; or ‘Bottom’ or ‘All’. %q：The percentages of text above both the top and the bottom of the window, separated by ‘-’, or ‘All’. %s：The status of the subprocess belonging to the current buffer, obtained with process-status. %z：The mnemonics of keyboard, terminal, and buffer coding systems. %Z：Like ‘%z’, but including the end-of-line format. %*：‘%’ if the buffer is read only (see buffer-read-only); ‘*’ if the buffer is modified (see buffer-modified-p); ‘-’ otherwise. %+：‘*’ if the buffer is modified (see buffer-modified-p); ‘%’ if the buffer is read only (see buffer-read-only); ‘-’ otherwise. This differs from ‘%*’ only for a modified read-only buffer. %\u0026：‘*’ if the buffer is modified, and ‘-’ otherwise. %[：An indication of the depth of recursive editing levels (not counting minibuffer levels): one ‘[’ for each editing level. %]：One ‘]’ for each recursive editing level (not counting minibuffer levels). %-：Dashes sufficient to fill the remainder of the mode line. %%：The character ‘%’—this is how to include a literal ‘%’ in a string in which %-constructs are allowed. %m：mode-name； %M：global-mode-string； 自定义mode-line 修改mode-line-format的值：\n(defun dotemacs-mode-line-fill (face reserve) \"Return empty space using FACE and leaving RESERVE space on the right.\" (unless reserve (setq reserve 20)) (when (and (display-graphic-p) (eq 'right (get-scroll-bar-mode))) (setq reserve (- reserve 3))) (propertize \" \" 'display `((space :align-to (- (+ right right-fringe right-margin) ,reserve))) 'face face)) (defun dotemacs-buffer-encoding-abbrev () \"The line ending convention used in the buffer.\" (let ((buf-coding (format \"%s\" buffer-file-coding-system))) (if (string-match \"\\\\(dos\\\\|unix\\\\|mac\\\\)\" buf-coding) (match-string 1 buf-coding) buf-coding))) (setq-default mode-line-format (list \"%e\" mode-line-front-space ;; mode-line-mule-info ;; mode-line-client ;; mode-line-modified ;; mode-line-remote ;; mode-line-frame-identification \" \" ;; mode-line-buffer-identification '(:eval (propertize \"%b\" 'face 'font-lock-keyword-face 'help-echo (buffer-file-name))) \" [\" ;; insert vs overwrite mode, input-method in a tooltip '(:eval (propertize (if overwrite-mode \"Ovr\" \"Ins\") 'face 'font-lock-preprocessor-face 'help-echo (concat \"Buffer is in \" (if overwrite-mode \"overwrite\" \"insert\") \" mode\"))) ;; was this buffer modified since the last save? '(:eval (when (buffer-modified-p) (concat \",\" (propertize \"Mod\" 'face 'font-lock-warning-face 'help-echo \"Buffer has been modified\")))) ;; is this buffer read-only? '(:eval (when buffer-read-only (concat \",\" (propertize \"RO\" 'face 'font-lock-type-face 'help-echo \"Buffer is read-only\")))) \"] \" \"[\" (propertize \"%p\" 'face 'font-lock-constant-face) \"/\" (propertize \"%I\" 'face 'font-lock-constant-face) \"] \" mode-line-modes \" \" '(:eval `(vc-mode vc-mode)) \" \" ;; (dotemacs-mode-line-fill 'mode-line 35) ;;mode-line-position \" (\" (propertize \"%l\" 'face 'font-lock-type-face) \",\" (propertize \"%c\" 'face 'font-lock-type-face) \") \" '(:eval (dotemacs-buffer-encoding-abbrev)) \" \" '(:eval mode-line-misc-info) mode-line-end-spaces )) 隐藏mode-line上的minor mode 使用diminish：\n(require 'diminish) ;; Hide jiggle-mode lighter from mode line (diminish 'jiggle-mode) ;; Replace abbrev-mode lighter with \"Abv\" (diminish 'abbrev-mode \"Abv\") ","wordCount":"702","inLanguage":"en","datePublished":"2018-07-09T09:59:51+08:00","dateModified":"2018-07-09T09:59:51+08:00","author":{"@type":"Person","name":"Chuck"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuchengpeng.github.io/post/customize-emacs-mode-line/"},"publisher":{"@type":"Organization","name":"Chuck","logo":{"@type":"ImageObject","url":"https://xuchengpeng.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuchengpeng.github.io/ accesskey=h title="Chuck (Alt + H)"><img src=https://xuchengpeng.github.io/apple-touch-icon.png alt aria-label=logo height=35>Chuck</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuchengpeng.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://xuchengpeng.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://xuchengpeng.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://xuchengpeng.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://xuchengpeng.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuchengpeng.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://xuchengpeng.github.io/post/>Posts</a></div><h1 class=post-title>自定义emacs mode-line</h1><div class=post-meta><span title='2018-07-09 09:59:51 +0800 +0800'>July 9, 2018</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;702 words&nbsp;·&nbsp;Chuck&nbsp;|&nbsp;<a href=https://github.com/xuchengpeng/xuchengpeng.github.io/tree/main/content/post/customize-emacs-mode-line.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#一些常用的mode-line包>一些常用的mode-line包</a></li><li><a href=#了解mode-line>了解mode-line</a></li><li><a href=#自定义mode-line>自定义mode-line</a></li><li><a href=#隐藏mode-line上的minor-mode>隐藏mode-line上的minor mode</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=一些常用的mode-line包>一些常用的mode-line包<a hidden class=anchor aria-hidden=true href=#一些常用的mode-line包>#</a></h3><ul><li><a href=https://github.com/milkypostman/powerline>powerline</a></li><li><a href=https://github.com/Malabarba/smart-mode-line>smart-mode-line</a></li><li><a href=https://github.com/TheBB/spaceline>spaceline</a></li><li><a href=https://github.com/dbordak/telephone-line>telephone-line</a></li></ul><h3 id=了解mode-line>了解mode-line<a hidden class=anchor aria-hidden=true href=#了解mode-line>#</a></h3><p>mode-line初始值：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-el data-lang=el><span class=line><span class=cl><span class=p>(</span><span class=s>&#34;%e&#34;</span> <span class=nv>mode-line-front-space</span> <span class=nv>mode-line-mule-info</span> <span class=nv>mode-line-client</span> <span class=nv>mode-line-modified</span> <span class=nv>mode-line-remote</span> <span class=nv>mode-line-frame-identification</span> <span class=nv>mode-line-buffer-identification</span> <span class=s>&#34;   &#34;</span> <span class=nv>mode-line-position</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=nv>vc-mode</span> <span class=nv>vc-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;  &#34;</span> <span class=nv>mode-line-modes</span> <span class=nv>mode-line-misc-info</span> <span class=nv>mode-line-end-spaces</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=mode-line变量>mode-line变量<a hidden class=anchor aria-hidden=true href=#mode-line变量>#</a></h4><ul><li>mode-line-mule-info：显示当前语言环境、编码信息和输入法；</li><li>mode-line-modified：显示当前内容是否被修改，<code>**</code>表示已经被修改，<code>--</code>表示没有被修改，<code>%%</code>表示只读，<code>%*</code>表示只读但是被修改；</li><li>mode-line-frame-identification：用来标识当前窗口；</li><li>mode-line-buffer-identification：用来表示当前buffer；</li><li>mode-line-position：用来表示在buffer中的位置，可显示位置百分比、buffer大小、当前行号和列号；</li><li>mode-line-percent-position：在<code>mode-line-position</code>中被使用；</li><li>vc-mode：显示版本管理信息；</li><li>mode-line-modes：显示当前major和minor modes；</li><li>mode-line-remote：用来显示当前buffer的default-directory是否是远程文件夹；</li><li>mode-line-client：用来表示emacsclient窗口；</li><li>mode-name： 显示当前buffer的major mode；</li><li>mode-line-front-space：显示在mode-line最前面；</li><li>mode-line-end-spaces：显示在mode-line最后面；</li><li>mode-line-misc-info：显示杂项信息；</li><li>minor-mode-alist：包含当前buffer激活的所有minor modes；</li><li>global-mode-string：This variable holds a mode line construct that, by default, appears in the mode line just after the which-func-mode minor mode if set, else after mode-line-modes. The command display-time sets global-mode-string to refer to the variable display-time-string, which holds a string containing the time and load information. The ‘%M’ construct substitutes the value of global-mode-string, but that is obsolete, since the variable is included in the mode line from mode-line-format.</li></ul><h4 id=-constructs-in-the-mode-line>%-Constructs in the Mode Line<a hidden class=anchor aria-hidden=true href=#-constructs-in-the-mode-line>#</a></h4><ul><li>%b：当前buffer名称；</li><li>%c：当前列号，从最左边0开始计算；</li><li>%C：当前列号，从最左边1开始计算；</li><li>%e：When Emacs is nearly out of memory for Lisp objects, a brief message saying so. Otherwise, this is empty.</li><li>%f：文件名；</li><li>%F：窗口名称；</li><li>%i：当前buffer大小；</li><li>%I：Like ‘%i’, but the size is printed in a more readable way by using ‘k’ for 10^3, ‘M’ for 10^6, ‘G’ for 10^9, etc., to abbreviate.</li><li>%l：当前行号；</li><li>%n：‘Narrow’ when narrowing is in effect; nothing otherwise.</li><li>%o：The degree of travel of the window through (the visible portion of) the buffer, i.e. the size of the text above the top of the window expressed as a percentage of all the text outside the window, or ‘Top’, ‘Bottom’ or ‘All’.</li><li>%p：The percentage of the buffer text above the top of window, or ‘Top’, ‘Bottom’ or ‘All’. Note that the default mode line construct truncates this to three characters.</li><li>%P：The percentage of the buffer text that is above the bottom of the window (which includes the text visible in the window, as well as the text above the top), plus ‘Top’ if the top of the buffer is visible on screen; or ‘Bottom’ or ‘All’.</li><li>%q：The percentages of text above both the top and the bottom of the window, separated by ‘-’, or ‘All’.</li><li>%s：The status of the subprocess belonging to the current buffer, obtained with process-status.</li><li>%z：The mnemonics of keyboard, terminal, and buffer coding systems.</li><li>%Z：Like ‘%z’, but including the end-of-line format.</li><li>%*：‘%’ if the buffer is read only (see buffer-read-only); ‘*’ if the buffer is modified (see buffer-modified-p); ‘-’ otherwise.</li><li>%+：‘*’ if the buffer is modified (see buffer-modified-p); ‘%’ if the buffer is read only (see buffer-read-only); ‘-’ otherwise. This differs from ‘%*’ only for a modified read-only buffer.</li><li>%&：‘*’ if the buffer is modified, and ‘-’ otherwise.</li><li>%[：An indication of the depth of recursive editing levels (not counting minibuffer levels): one ‘[’ for each editing level.</li><li>%]：One ‘]’ for each recursive editing level (not counting minibuffer levels).</li><li>%-：Dashes sufficient to fill the remainder of the mode line.</li><li>%%：The character ‘%’—this is how to include a literal ‘%’ in a string in which %-constructs are allowed.</li><li>%m：mode-name；</li><li>%M：global-mode-string；</li></ul><h3 id=自定义mode-line>自定义mode-line<a hidden class=anchor aria-hidden=true href=#自定义mode-line>#</a></h3><p>修改<code>mode-line-format</code>的值：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-el data-lang=el><span class=line><span class=cl><span class=p>(</span><span class=nv>defun</span> <span class=nv>dotemacs-mode-line-fill</span> <span class=p>(</span><span class=nv>face</span> <span class=nv>reserve</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return empty space using FACE and leaving RESERVE space on the right.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>unless</span> <span class=nv>reserve</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>setq</span> <span class=nv>reserve</span> <span class=mi>20</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>when</span> <span class=p>(</span><span class=nv>and</span> <span class=p>(</span><span class=nv>display-graphic-p</span><span class=p>)</span> <span class=p>(</span><span class=nv>eq</span> <span class=ss>&#39;right</span> <span class=p>(</span><span class=nv>get-scroll-bar-mode</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>setq</span> <span class=nv>reserve</span> <span class=p>(</span><span class=nv>-</span> <span class=nv>reserve</span> <span class=mi>3</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34; &#34;</span>
</span></span><span class=line><span class=cl>              <span class=ss>&#39;display</span> <span class=o>`</span><span class=p>((</span><span class=nv>space</span> <span class=nb>:align-to</span>
</span></span><span class=line><span class=cl>                                <span class=p>(</span><span class=nv>-</span> <span class=p>(</span><span class=nv>+</span> <span class=nv>right</span> <span class=nv>right-fringe</span> <span class=nv>right-margin</span><span class=p>)</span> <span class=o>,</span><span class=nv>reserve</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>              <span class=ss>&#39;face</span> <span class=nv>face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>defun</span> <span class=nv>dotemacs-buffer-encoding-abbrev</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;The line ending convention used in the buffer.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>let</span> <span class=p>((</span><span class=nv>buf-coding</span> <span class=p>(</span><span class=nv>format</span> <span class=s>&#34;%s&#34;</span> <span class=nv>buffer-file-coding-system</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>if</span> <span class=p>(</span><span class=nv>string-match</span> <span class=s>&#34;\\(dos\\|unix\\|mac\\)&#34;</span> <span class=nv>buf-coding</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>match-string</span> <span class=mi>1</span> <span class=nv>buf-coding</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>buf-coding</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>setq-default</span> <span class=nv>mode-line-format</span>
</span></span><span class=line><span class=cl>                <span class=p>(</span><span class=nv>list</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;%e&#34;</span>
</span></span><span class=line><span class=cl>                 <span class=nv>mode-line-front-space</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; mode-line-mule-info</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; mode-line-client</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; mode-line-modified</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; mode-line-remote</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; mode-line-frame-identification</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34; &#34;</span>
</span></span><span class=line><span class=cl>                 <span class=c1>;; mode-line-buffer-identification</span>
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;%b&#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-keyword-face</span>
</span></span><span class=line><span class=cl>                                     <span class=ss>&#39;help-echo</span> <span class=p>(</span><span class=nv>buffer-file-name</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=s>&#34; [&#34;</span> <span class=c1>;; insert vs overwrite mode, input-method in a tooltip</span>
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=p>(</span><span class=nv>propertize</span> <span class=p>(</span><span class=nv>if</span> <span class=nv>overwrite-mode</span> <span class=s>&#34;Ovr&#34;</span> <span class=s>&#34;Ins&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                                     <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-preprocessor-face</span>
</span></span><span class=line><span class=cl>                                     <span class=ss>&#39;help-echo</span> <span class=p>(</span><span class=nv>concat</span> <span class=s>&#34;Buffer is in &#34;</span>
</span></span><span class=line><span class=cl>                                                        <span class=p>(</span><span class=nv>if</span> <span class=nv>overwrite-mode</span>
</span></span><span class=line><span class=cl>                                                            <span class=s>&#34;overwrite&#34;</span>
</span></span><span class=line><span class=cl>                                                          <span class=s>&#34;insert&#34;</span><span class=p>)</span> <span class=s>&#34; mode&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 <span class=c1>;; was this buffer modified since the last save?</span>
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=p>(</span><span class=nv>when</span> <span class=p>(</span><span class=nv>buffer-modified-p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                           <span class=p>(</span><span class=nv>concat</span> <span class=s>&#34;,&#34;</span> <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;Mod&#34;</span>
</span></span><span class=line><span class=cl>                                                   <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-warning-face</span>
</span></span><span class=line><span class=cl>                                                   <span class=ss>&#39;help-echo</span> <span class=s>&#34;Buffer has been modified&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                 <span class=c1>;; is this buffer read-only?</span>
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=p>(</span><span class=nv>when</span> <span class=nv>buffer-read-only</span>
</span></span><span class=line><span class=cl>                           <span class=p>(</span><span class=nv>concat</span> <span class=s>&#34;,&#34;</span> <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;RO&#34;</span>
</span></span><span class=line><span class=cl>                                                   <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-type-face</span>
</span></span><span class=line><span class=cl>                                                   <span class=ss>&#39;help-echo</span> <span class=s>&#34;Buffer is read-only&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;] &#34;</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=s>&#34;[&#34;</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;%p&#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-constant-face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;%I&#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-constant-face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;] &#34;</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=nv>mode-line-modes</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=s>&#34;   &#34;</span>
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=o>`</span><span class=p>(</span><span class=nv>vc-mode</span> <span class=nv>vc-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;   &#34;</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=c1>;; (dotemacs-mode-line-fill &#39;mode-line 35)</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=c1>;;mode-line-position</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34; (&#34;</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;%l&#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-type-face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;,&#34;</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=nv>propertize</span> <span class=s>&#34;%c&#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;font-lock-type-face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;) &#34;</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=p>(</span><span class=nv>dotemacs-buffer-encoding-abbrev</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;  &#34;</span>
</span></span><span class=line><span class=cl>                 <span class=o>&#39;</span><span class=p>(</span><span class=nb>:eval</span> <span class=nv>mode-line-misc-info</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 
</span></span><span class=line><span class=cl>                 <span class=nv>mode-line-end-spaces</span>
</span></span><span class=line><span class=cl>                 <span class=p>))</span>
</span></span></code></pre></div><h3 id=隐藏mode-line上的minor-mode>隐藏mode-line上的minor mode<a hidden class=anchor aria-hidden=true href=#隐藏mode-line上的minor-mode>#</a></h3><p>使用<a href=https://github.com/emacsmirror/diminish>diminish</a>：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-el data-lang=el><span class=line><span class=cl><span class=p>(</span><span class=nv>require</span> <span class=ss>&#39;diminish</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; Hide jiggle-mode lighter from mode line</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>diminish</span> <span class=ss>&#39;jiggle-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; Replace abbrev-mode lighter with &#34;Abv&#34;</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>diminish</span> <span class=ss>&#39;abbrev-mode</span> <span class=s>&#34;Abv&#34;</span><span class=p>)</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuchengpeng.github.io/tags/mode-line/>mode-line</a></li><li><a href=https://xuchengpeng.github.io/tags/diminish/>diminish</a></li></ul><nav class=paginav><a class=prev href=https://xuchengpeng.github.io/post/setting-mathjax-with-hugo/><span class=title>« Prev</span><br><span>Setting MathJax with Hugo</span></a>
<a class=next href=https://xuchengpeng.github.io/post/tcp-ip-illustrated-volume1-snmp/><span class=title>Next »</span><br><span>TCP/IP 详解(卷一) SNMP：简单网络管理协议</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://xuchengpeng.github.io/>Chuck</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>